var pN=[],oN={},iN={},opN={},cN={},bN={},imN={},swN={},rN={},rcN={},vA=['left','right','middle'],vV=['top','middle','bottom'],vS=['quote','title','bold','tilt','underline','url','delete'],vT=['slide','fade','rotate','zoomin','zoomout','none'],vM=['redirect','cover'],vD=['remove','disable'],vC=['disable','modal','switch'],vDi=['none','min','1','2','3','max'],vRT=['content','btn','image'];
function cA(k,v){if(v&&vA.indexOf(v)<0)e.push(k+' 必须是 left/right/middle')}
function cS(k,v){if(v)v.split('\\\\').forEach(function(s){if(s&&vS.indexOf(s)<0)e.push(k+' 无效样式 '+s)})}
function cT(k,v){if(v&&vT.indexOf(v)<0)e.push(k+' 必须是 slide/fade/rotate/zoomin/zoomout/none')}
function cDi(k,v){if(v&&vDi.indexOf(v)<0)e.push(k+' 必须是 none/min/1/2/3/max')}
function cV(k,v){if(v&&vV.indexOf(v)<0)e.push(k+' 必须是 top/middle/bottom')}
function cRT(k,v){if(v&&vRT.indexOf(v)<0)e.push(k+' 必须是 content/btn/image')}
if(g['page.content.align'])cA('page.content.align',g['page.content.align']);
if(g['page.content.style'])cS('page.content.style',g['page.content.style']);
if(g['page.content.distance'])cDi('page.content.distance',g['page.content.distance']);
cT('page.animation.type',g['page.animation.type']);
if(g['page.animation.duration']&&!/^\\d+\$/.test(g['page.animation.duration']))e.push('page.animation.duration 必须是数字');
Object.keys(g).forEach(function(k){var m;
if(m=k.match(/^page\\.(\d+)\\./)){var x=+m[1];if(x<1)e.push('page.'+x+' x<1');if(pN.indexOf(x)<0)pN.push(x);if(/\\.background\\.color\$|\\.modal\\.color\$|\\.btn\\.color\$/.test(k)&&g[k]&&!H(g[k]))e.push(k+' 颜色无效');if(/^page\\.\\d+\\.content\\.align\$/.test(k))cA(k,g[k]);if(/^page\\.\\d+\\.content\\.style\$/.test(k))cS(k,g[k]);if(/^page\\.\\d+\\.content\\.distance\$/.test(k))cDi(k,g[k]);if(/^page\\.(\\d+)\\.animation\\.type\$/.test(k))cT(k,g[k]);if(/^page\\.(\\d+)\\.animation\\.duration\$/.test(k)&&g[k]&&!/^\\d+\$/.test(g[k]))e.push(k+' 必须是数字')}
if(m=k.match(/^page\\.(\\d+)\\.content\\.(\\d+)(\\..*)?\$/)){var x=+m[1],y=+m[2];if(y<1)e.push(k+' y<1');if(!cN[x])cN[x]=[];if(cN[x].indexOf(y)<0)cN[x].push(y);if(m[3]==='.align')cA(k,g[k]);if(m[3]==='.style')cS(k,g[k]);if(m[3]==='.distance')cDi(k,g[k])}
if(m=k.match(/^page\\.(\\d+)\\.options\\.(\\d+)\\./)){var x=+m[1],y=+m[2];if(y<1)e.push(k+' y<1');if(!oN[x])oN[x]=[];if(oN[x].indexOf(y)<0)oN[x].push(y)}
if(m=k.match(/^page\\.(\\d+)\\.options\\.(\\d+)\\.option\\.(\\d+)\$/)){var x=+m[1],y=+m[2],z=+m[3];if(z<1)e.push(k+' z<1');var K=x+'.'+y;if(!opN[K])opN[K]=[];if(opN[K].indexOf(z)<0)opN[K].push(z)}
if(m=k.match(/^page\\.(\\d+)\\.input\\.(\\d+)\\./)){var x=+m[1],y=+m[2];if(y<1)e.push(k+' y<1');if(!iN[x])iN[x]=[];if(iN[x].indexOf(y)<0)iN[x].push(y)}
if(m=k.match(/^page\\.(\\d+)\\.btn\\.(\\d+)\\./)){var x=+m[1],y=+m[2];if(y<1)e.push(k+' y<1');if(!bN[x])bN[x]=[];if(bN[x].indexOf(y)<0)bN[x].push(y)}
if(m=k.match(/^page\\.(\\d+)\\.image\\.(\\d+)\\./)){var x=+m[1],y=+m[2];if(y<1)e.push(k+' y<1');if(!imN[x])imN[x]=[];if(imN[x].indexOf(y)<0)imN[x].push(y)}
if(m=k.match(/^page\\.(\\d+)\\.image\\.(\\d+)\\.switch\\.(\\d+)\$/)){var x=+m[1],y=+m[2],z=+m[3];if(z<1)e.push(k+' z<1');var K=x+'.'+y;if(!swN[K])swN[K]=[];if(swN[K].indexOf(z)<0)swN[K].push(z)}
if(m=k.match(/^page\\.(\\d+)\\.row\\.(\\d+)\\./)){var x=+m[1],y=+m[2];if(y<1)e.push(k+' y<1');if(!rN[x])rN[x]=[];if(rN[x].indexOf(y)<0)rN[x].push(y)}
if(m=k.match(/^page\\.(\\d+)\\.row\\.(\\d+)\\.(\\d+)\\./)){var x=+m[1],y=+m[2],z=+m[3];if(z<1)e.push(k+' z<1');var K=x+'.'+y;if(!rcN[K])rcN[K]=[];if(rcN[K].indexOf(z)<0)rcN[K].push(z)}
if(/^page\\.\\d+\\.btn\\.\\d+\\.align\$/.test(k))cA(k,g[k]);
});
pN.forEach(function(x){if(oN[x])oN[x].forEach(function(y){var P='page.'+x+'.options.'+y;if(!g[P+'.title'])e.push('缺少 '+P+'.title');if(!g[P+'.key'])e.push('缺少 '+P+'.key');var d=+(g[P+'.default']||1),K=x+'.'+y;if(!opN[K]||opN[K].indexOf(d)<0)e.push(P+'.default 指向不存在的option.'+d)});if(iN[x])iN[x].forEach(function(y){var P='page.'+x+'.input.'+y;if(!g[P+'.title'])e.push('缺少 '+P+'.title');if(!g[P+'.key'])e.push('缺少 '+P+'.key')});if(cN[x])cN[x].forEach(function(y){var P='page.'+x+'.content.'+y,st=g[P+'.style']||'';if(st.indexOf('url')>=0){var ul=g[P+'.url']||'';if(ul&&ul.indexOf('http://')!==0&&ul.indexOf('https://')!==0)e.push(P+'.url 必须是http/https链接');if(!ul)e.push('缺少 '+P+'.url')};var en=g[P+'.enter'];if(en&&en!=='true'&&en!=='false')e.push(P+'.enter 必须是true/false')});if(bN[x])bN[x].forEach(function(y){var P='page.'+x+'.btn.'+y;if(!g[P+'.content'])e.push('缺少 '+P+'.content');if(g[P+'.color']&&!H(g[P+'.color']))e.push(P+'.color 颜色无效');var md=g[P+'.mode'];if(md&&vM.indexOf(md)<0)e.push(P+'.mode 必须是redirect/cover');var rc=g[P+'.reclickable'];if(rc&&rc!=='true'&&rc!=='false')e.push(P+'.reclickable 必须是true/false');var dt=g[P+'.death.type'];if(dt&&vD.indexOf(dt)<0)e.push(P+'.death.type 必须是remove/disable');cT(P+'.animation.type',g[P+'.animation.type']);if(g[P+'.animation.duration']&&!/^\\d+\$/.test(g[P+'.animation.duration']))e.push(P+'.animation.duration 必须是数字');var ml=g[P+'.modal'];if(ml&&pN.indexOf(+ml)<0)e.push(P+'.modal 指向不存在的page.'+ml)});if(imN[x])imN[x].forEach(function(y){var P='page.'+x+'.image.'+y;if(!g[P+'.url'])e.push('缺少 '+P+'.url');cA(P+'.align',g[P+'.align']);var ct=g[P+'.click.type'];if(ct&&vC.indexOf(ct)<0)e.push(P+'.click.type 必须是disable/modal/switch');if(ct==='modal'){var mm=g[P+'.modal.modal'];if(mm&&pN.indexOf(+mm)<0)e.push(P+'.modal.modal 指向不存在的page.'+mm);var mo=g[P+'.modal.mode'];if(mo&&vM.indexOf(mo)<0)e.push(P+'.modal.mode 必须是redirect/cover');cT(P+'.modal.animation.type',g[P+'.modal.animation.type']);if(g[P+'.modal.animation.duration']&&!/^\\d+\$/.test(g[P+'.modal.animation.duration']))e.push(P+'.modal.animation.duration 必须是数字')}if(ct==='switch'){var cy=g[P+'.switch.cycle'];if(cy&&cy!=='true'&&cy!=='false')e.push(P+'.switch.cycle 必须是true/false')}});if(rN[x])rN[x].forEach(function(y){var P='page.'+x+'.row.'+y;var rt=g[P+'.ratio'];if(rt&&!/^\\d+(:\\d+)*\$/.test(rt))e.push(P+'.ratio 格式错误');var K=x+'.'+y;if(rcN[K])rcN[K].forEach(function(z){var Q=P+'.'+z;cRT(Q+'.type',g[Q+'.type']);cA(Q+'.align',g[Q+'.align']);cV(Q+'.valign',g[Q+'.valign']);var tp=g[Q+'.type']||'content';if(tp==='btn'){if(g[Q+'.btn.color']&&!H(g[Q+'.btn.color']))e.push(Q+'.btn.color 颜色无效');var md=g[Q+'.btn.mode'];if(md&&vM.indexOf(md)<0)e.push(Q+'.btn.mode 必须是redirect/cover');var rc=g[Q+'.btn.reclickable'];if(rc&&rc!=='true'&&rc!=='false')e.push(Q+'.btn.reclickable 必须是true/false');var dt=g[Q+'.btn.death.type'];if(dt&&vD.indexOf(dt)<0)e.push(Q+'.btn.death.type 必须是remove/disable');cT(Q+'.btn.animation.type',g[Q+'.btn.animation.type']);if(g[Q+'.btn.modal']&&pN.indexOf(+g[Q+'.btn.modal'])<0)e.push(Q+'.btn.modal 指向不存在的page')}if(tp==='image'){cA(Q+'.image.align',g[Q+'.image.align']);var ct=g[Q+'.image.click.type'];if(ct&&vC.indexOf(ct)<0)e.push(Q+'.image.click.type 必须是disable/modal/switch')}if(tp==='content'){cS(Q+'.content.style',g[Q+'.content.style'])}})});var rh=g['page.'+x+'.row.height'];if(rh&&!/^(\\d+(,\\d+)*)(:(\\d+(,\\d+)*))*\$/.test(rh))e.push('page.'+x+'.row.height 格式错误')});