<!DOCTYPE html><html><head><meta charset="utf-8"><style>*{margin:0;padding:0;box-sizing:border-box}body{background:#050505;font-family:system-ui,sans-serif}</style></head><body>
<script>/*__INJECT__*/</script>
<script>
window.L={loaded:{},base:'https://raw.githubusercontent.com/Nixdorfer/mmd-iframe-template/refs/heads/main/',edit:false,project:'',char:'',user:'',b64:'',res:window.R||window.innerWidth+'x'+window.innerHeight,platform:(function(){var w=window.innerWidth,h=window.innerHeight,r=w/h;return Math.abs(r-16/9)<Math.abs(r-9/19)?'pc':'mobile'})(),load:function(libs,cb){var self=this,pending=libs.filter(function(n){return!self.loaded[n]});if(!pending.length)return cb&&cb();var c=pending.length;pending.forEach(function(n){self.loaded[n]=1;fetch(self.base+'library/'+n+'.js?t='+Date.now()).then(function(r){return r.text()}).then(function(t){new Function(t)();if(--c===0&&cb)cb()})})}};
(function(){document.body.innerHTML='<canvas id="bg" style="position:fixed;top:0;left:0;width:100vw;height:100vh"></canvas><div id="msg" style="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:16px">加载中...</div>';var cv=document.getElementById('bg'),cx=cv.getContext('2d');cv.width=window.innerWidth;cv.height=window.innerHeight;cx.fillStyle='#050505';cx.fillRect(0,0,cv.width,cv.height);var p=window.P;if(!p){document.getElementById('msg').textContent='参数为空';return}var m=p.match(/^(?:(EDIT):)?([^:]+):(.+)$/);if(!m){document.getElementById('msg').textContent='格式错误';parent.postMessage({t:'error',msg:'格式错误'},'*');return}L.edit=!!m[1];L.project=m[2];var params=m[3].split(';;');L.char=params[0]||'';L.user=params[1]||'';L.b64=params[2]||'';document.body.innerHTML='<div style="display:flex;align-items:center;justify-content:center;height:100vh;color:#fff">加载中...</div>';fetch(L.base+'navigator.json?t='+Date.now(),{cache:'no-store'}).then(function(r){return r.json()}).then(function(nav){var proj=nav.projects[L.project];if(!proj){parent.postMessage({t:'error',msg:'未找到: '+L.project},'*');return}fetch(L.base+proj.index+'?t='+Date.now(),{cache:'no-store'}).then(function(r){return r.text()}).then(function(h){var cfg='window.L='+JSON.stringify({loaded:{},base:L.base,edit:L.edit,project:L.project,char:L.char,user:L.user,b64:L.b64,res:L.res,platform:L.platform})+';L.load=function(libs,cb){var self=this,pending=libs.filter(function(n){return!self.loaded[n]});if(!pending.length)return cb&&cb();var c=pending.length;pending.forEach(function(n){self.loaded[n]=1;fetch(self.base+"library/"+n+".js?t="+Date.now()).then(function(r){return r.text()}).then(function(t){new Function(t)();if(--c===0&&cb)cb()})})};';document.open();document.write('<!DOCTYPE html><html><head><meta charset="utf-8"></head><body><script>'+cfg+'<\/script>'+h+'</body></html>');document.close()}).catch(function(){parent.postMessage({t:'error',msg:'加载失败'},'*')})}).catch(function(){parent.postMessage({t:'error',msg:'导航失败'},'*')})})();
</script>
</body></html>
